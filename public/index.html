<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>WebEditX</title>
  <style>
    html, body, #editor { height: 100%; margin: 0; }
    #toolbar { padding: 6px; background: #222; color: #eee; }
    button { margin-left: 10px; }
  </style>
  <script src="https://unpkg.com/monaco-editor/min/vs/loader.js"></script>
</head>
<body>
  <div id="toolbar">
    <span id="filename"></span>
    <button onclick="saveFile()">ðŸ’¾ Save</button>
  </div>
  <div id="editor"></div>

  <script>
    let editor, currentFile;

    require.config({ paths: { vs: "https://unpkg.com/monaco-editor/min/vs" } });
    require(["vs/editor/editor.main"], async () => {
      const res = await fetch("/api/file");
      const { name, content } = await res.json();
      document.getElementById("filename").textContent = name;
      currentFile = name;
      editor = monaco.editor.create(document.getElementById("editor"), {
        value: content,
        language: "plaintext",
        theme: "vs-dark"
      });
    });

    async function saveFile() {
      await fetch("/api/file", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ content: editor.getValue() })
      });
      alert("âœ… File saved!");
    }
  </script>
</body>
</html>
